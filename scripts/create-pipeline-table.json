{
  "name": "create_ai_pipeline_outputs",
  "query": "CREATE TABLE IF NOT EXISTS ai_pipeline_outputs (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), tenant_id UUID NOT NULL, product_id UUID NOT NULL, output_type TEXT NOT NULL, version INTEGER NOT NULL DEFAULT 1, content JSONB NOT NULL, metadata JSONB DEFAULT '{}'::jsonb, created_at TIMESTAMPTZ DEFAULT NOW(), UNIQUE(tenant_id, product_id, output_type, version)); CREATE INDEX IF NOT EXISTS idx_pipeline_outputs_tenant ON ai_pipeline_outputs(tenant_id); CREATE INDEX IF NOT EXISTS idx_pipeline_outputs_product ON ai_pipeline_outputs(product_id);"
}
